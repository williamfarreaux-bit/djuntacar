<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DjuntaCar - Avis</title>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-[#fcfcfd] antialiased">

    <header>
        <div class="header-left">
            <button onclick="window.history.back()" class="profile-btn">
                <i data-lucide="x" class="header-user-icon"></i>
            </button>
        </div>
        <div class="header-center">
            <span class="text-[#1d4379] font-black uppercase text-sm">Noter le voyage</span>
        </div>
        <div class="header-right">
            </div>
    </header>

    <main class="content-padding pt-6 pb-24 text-center">
        
        <img src="https://images.unsplash.com/photo-1541899481282-d53bffe3c35d" class="w-24 h-24 rounded-full object-cover mx-auto mb-4 border-4 border-white shadow-lg">
        <h1 class="text-xl font-black text-[#1d4379] mb-1">Mercedes GLC</h1>
        <p class="text-xs font-bold text-gray-400 mb-8">Loué à Joao Mendes</p>

        <p class="text-sm font-bold text-gray-600 mb-4">Comment s'est passé votre trajet ?</p>
        
        <div class="flex justify-center gap-2 mb-8" id="starContainer">
            <button onclick="setRating(1)" class="star-btn text-gray-300 hover:scale-110 transition-transform"><i data-lucide="star" class="w-10 h-10 fill-current"></i></button>
            <button onclick="setRating(2)" class="star-btn text-gray-300 hover:scale-110 transition-transform"><i data-lucide="star" class="w-10 h-10 fill-current"></i></button>
            <button onclick="setRating(3)" class="star-btn text-gray-300 hover:scale-110 transition-transform"><i data-lucide="star" class="w-10 h-10 fill-current"></i></button>
            <button onclick="setRating(4)" class="star-btn text-gray-300 hover:scale-110 transition-transform"><i data-lucide="star" class="w-10 h-10 fill-current"></i></button>
            <button onclick="setRating(5)" class="star-btn text-gray-300 hover:scale-110 transition-transform"><i data-lucide="star" class="w-10 h-10 fill-current"></i></button>
        </div>
        
        <input type="hidden" id="ratingValue" value="0">

        <div class="text-left">
            <label class="input-label ml-1">Laissez un commentaire (Optionnel)</label>
            <textarea id="reviewText" class="input-field h-32 resize-none pt-3" placeholder="Voiture très propre, propriétaire sympa..."></textarea>
        </div>

    </main>

    <div class="fixed-footer">
        <button onclick="submitReview()" class="btn-action btn-primary shadow-xl">
            Envoyer l'avis
        </button>
    </div>

    <script>
        lucide.createIcons();

        function setRating(n) {
            const stars = document.querySelectorAll('.star-btn');
            document.getElementById('ratingValue').value = n;
            
            stars.forEach((star, index) => {
                if (index < n) {
                    star.classList.remove('text-gray-300');
                    star.classList.add('text-amber-500'); // Or
                } else {
                    star.classList.remove('text-amber-500');
                    star.classList.add('text-gray-300'); // Gris
                }
            });
        }

        function submitReview() {
            const rating = document.getElementById('ratingValue').value;
            if (rating == 0) {
                alert("Veuillez sélectionner au moins une étoile.");
                return;
            }

            const btn = document.querySelector('.btn-primary');
            btn.innerHTML = '<i data-lucide="loader" class="animate-spin w-5 h-5 mx-auto"></i>';
            lucide.createIcons();
            
            setTimeout(() => {
                // Redirection vers l'accueil après succès
                alert("Merci pour votre avis !");
                window.location.href = 'index.html';
            }, 1500);
        }
    </script>
</body>
</html>

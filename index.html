<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DjuntaCar</title>
    <link rel="icon" type="image/png" href="sigle.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap');
        :root { --primary: #1d4379; --bg-gray: #F9FAFB; font-family: 'Montserrat', sans-serif; }
        
        body { 
            background-color: var(--bg-gray); 
            padding-bottom: 110px; /* Espace pour la barre fixe du bas */
            -webkit-tap-highlight-color: transparent; 
        }
        
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .hero-gradient { background: linear-gradient(135deg, #1d4379 0%, #142f55 100%); }
        .hero-shape { border-bottom-left-radius: 2.5rem; border-bottom-right-radius: 2.5rem; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        
        /* Animation Menu */
        #mobile-menu { transition: transform 0.3s ease-in-out; }
        .menu-open { transform: translateX(0) !important; }
        .menu-closed { transform: translateX(-100%); }

        /* Ombre douce pour la barre du bas */
        .nav-shadow { box-shadow: 0 -10px 25px -5px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div id="mobile-menu" class="fixed inset-0 z-[60] menu-closed flex">
        <div onclick="toggleMenu()" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="relative bg-white w-3/4 max-w-xs h-full shadow-2xl flex flex-col p-6">
            <div class="flex justify-between items-center mb-8">
                <img src="logo.png" class="h-8 object-contain">
                <button onclick="toggleMenu()" class="p-2 rounded-full hover:bg-gray-100">
                    <i data-lucide="x" class="w-6 h-6 text-gray-500"></i>
                </button>
            </div>
            <nav class="space-y-6 flex-1">
                <a href="index.html" class="flex items-center gap-3 text-[#1d4379] font-bold text-lg">
                    <i data-lucide="home" class="w-5 h-5"></i> Accueil
                </a>
                <a href="profile.html" class="flex items-center gap-3 text-gray-600 font-bold hover:text-[#1d4379]">
                    <i data-lucide="user-circle" class="w-5 h-5"></i> Mon Espace
                </a>
                <a href="add-car.html" class="flex items-center gap-3 text-gray-600 font-bold hover:text-[#1d4379]">
                    <i data-lucide="plus-square" class="w-5 h-5"></i> Ajoute ta voiture
                </a>
            </nav>
            <div class="mt-auto">
                <a href="login.html" class="block w-full text-center py-3 rounded-xl bg-gray-50 text-gray-600 font-bold text-sm">
                    Connexion / Inscription
                </a>
            </div>
        </div>
    </div>

    <header class="fixed top-0 w-full z-50 glass border-b border-gray-200">
        <div class="max-w-md mx-auto px-4 h-16 flex items-center justify-between">
            <button onclick="toggleMenu()" class="p-2 -ml-2 text-gray-700 hover:text-[#1d4379]">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
            <img src="logo.png" alt="DjuntaCar" class="h-8 object-contain">
            <a href="login.html" id="auth-link" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-[#1d4379]">
                <i data-lucide="user" class="w-5 h-5"></i>
            </a>
        </div>
    </header>

    <div class="fixed bottom-0 w-full z-[55] px-4 pb-6 pt-4 bg-gradient-to-t from-white via-white/90 to-transparent">
        <div class="max-w-md mx-auto grid grid-cols-2 gap-3">
            <a href="add-car.html" class="flex flex-col items-center justify-center gap-1 bg-[#1d4379] text-white py-3 rounded-2xl font-extrabold shadow-2xl active:scale-95 transition-all nav-shadow">
                <i data-lucide="plus-square" class="w-5 h-5"></i>
                <span class="text-[10px] uppercase tracking-tighter">Ajoute ta voiture</span>
            </a>
            <a href="login.html" class="flex flex-col items-center justify-center gap-1 bg-white text-[#1d4379] border-2 border-[#1d4379] py-3 rounded-2xl font-extrabold shadow-2xl active:scale-95 transition-all nav-shadow">
                <i data-lucide="user-plus" class="w-5 h-5"></i>
                <span class="text-[10px] uppercase tracking-tighter">Deviens chauffeur</span>
            </a>
        </div>
    </div>

    <div class="hero-gradient hero-shape pt-24 pb-12 px-5 text-white relative">
        <div class="max-w-md mx-auto relative z-10">
            <h1 class="text-3xl font-extrabold mb-2 text-center">Où allez-vous ?</h1>
            
            <div class="relative text-gray-800 mb-2">
                <i data-lucide="map-pin" class="absolute left-3 top-3.5 h-5 w-5 text-gray-400 z-10"></i>
                <select id="island-select" onchange="fetchVehicles()" class="block w-full pl-10 pr-10 py-3.5 bg-white border-0 text-gray-800 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-300 font-bold shadow-lg appearance-none">
                    <option value="all">Toutes les îles</option>
                    <option value="Santiago">Santiago</option>
                    <option value="Sal">Sal</option>
                    <option value="SaoVicente">São Vicente</option>
                    <option value="BoaVista">Boa Vista</option>
                    <option value="Fogo">Fogo</option>
                </select>
                <i data-lucide="chevron-down" class="absolute right-3 top-3.5 h-5 w-5 text-gray-400 pointer-events-none z-10"></i>
            </div>
        </div>
    </div>

    <main class="max-w-md mx-auto px-4 -mt-6 relative z-20">
        
        <div class="flex gap-2 overflow-x-auto pb-6 scrollbar-hide px-1">
            <button onclick="filterCat('all')" class="bg-[#1d4379] text-white px-5 py-2.5 rounded-full text-xs font-bold shadow-lg whitespace-nowrap active:scale-95 transition-transform">
                Tout
            </button>
            <button onclick="toggleDriver()" id="btn-driver" class="bg-white text-gray-600 px-4 py-2.5 rounded-full text-xs font-bold border border-gray-100 shadow-sm whitespace-nowrap flex items-center gap-2 active:scale-95 transition-transform">
                <i data-lucide="user-check" class="w-4 h-4"></i> Chauffeur
            </button>
            <button onclick="filterCat('citadina')" class="bg-white text-gray-600 px-5 py-2.5 rounded-full text-xs font-bold border border-gray-100 shadow-sm whitespace-nowrap active:scale-95 transition-transform">
                Cit

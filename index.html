<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test Diagnostic DjuntaCar</title>
</head>
<body style="font-family: monospace; padding: 20px;">

    <h1>üïµÔ∏è‚Äç‚ôÇÔ∏è Mode Diagnostic</h1>
    <div id="status">Tentative de connexion...</div>
    <div id="logs" style="background: #eee; padding: 10px; margin-top: 10px; border: 1px solid #ccc;"></div>

    <script type="module">
        // 1. On charge Supabase
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

        // Fonction pour afficher les messages sur l'√©cran
        function log(message, color = 'black') {
            const div = document.createElement('div');
            div.style.color = color;
            div.innerText = `> ${message}`;
            document.getElementById('logs').appendChild(div);
        }

        try {
            log("Initialisation du client Supabase...");
            
            // Vos cl√©s
            const SUPABASE_URL = 'https://enuiuuwnjzvpfvpklmjw.supabase.co';
            const SUPABASE_KEY = 'sb_publishable_MDe_Df6NgeA-MmeP1pguPQ_tgF2k8s-';
            
            const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
            log("Client Supabase cr√©√©.");

            // 2. Test de r√©cup√©ration des donn√©es
            log("Lancement de la requ√™te vers la table 'vehicles'...");
            
            const { data, error } = await supabase
                .from('vehicles')
                .select('*');

            if (error) {
                log("ERREUR CRITIQUE SUPABASE :", 'red');
                log(JSON.stringify(error, null, 2), 'red');
                document.getElementById('status').innerText = "‚ùå √âCHEC";
            } else {
                log("R√âPONSE RE√áUE !", 'green');
                log(`Nombre de voitures trouv√©es : ${data.length}`, 'blue');
                
                if (data.length > 0) {
                    log("Exemple de voiture 1 : " + data[0].make + " " + data[0].model);
                    // On v√©rifie les images
                    if (data[0].images_url) {
                         log("Images d√©tect√©es : OUI (Format Array)", 'green');
                    } else {
                         log("Attention : Pas d'images ou mauvais format", 'orange');
                    }
                } else {
                    log("La table est vide (0 voitures).", 'orange');
                }
                document.getElementById('status').innerText = "‚úÖ SUCC√à

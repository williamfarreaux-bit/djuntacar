<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DjuntaCar - Recherche</title>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-[#fcfcfd] antialiased">

    <header>
        <div class="header-left">
            <button onclick="toggleMenu()"><i data-lucide="menu" class="w-7 h-7 text-[#1d4379]"></i></button>
        </div>
        <div class="header-center">
            <img src="logo.png" alt="DjuntaCar" class="header-logo">
        </div>
        <div class="header-right">
            <button onclick="window.location.href='profile.html'"><i data-lucide="user" class="w-7 h-7 text-[#1d4379]"></i></button>
        </div>
    </header>

    <main class="content-padding pt-8">
        <h1 class="text-2xl font-black text-[#1d4379] mb-6">Planifier mon trajet</h1>

        <form id="searchForm" onsubmit="event.preventDefault(); goToResults();">
            
            <div class="form-section">
                <label class="input-label">Lieu de prise en charge</label>
                <div class="relative flex items-center">
                    <i data-lucide="map-pin" class="absolute left-0 text-[#1d4379] w-5 h-5"></i>
                    
                    <select id="locationSelect" class="input-field pl-8 bg-transparent appearance-none">
                        <option value="" disabled selected>Choisir une ville ou un a√©roport...</option>
                        
                        <optgroup label="üèùÔ∏è SANTIAGO">
                            <option value="rai_airport">Praia - A√©roport N. Mandela (RAI)</option>
                            <option value="praia_city">Praia - Centre Ville</option>
                            <option value="tarrafal">Tarrafal</option>
                            <option value="assomada">Assomada</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è S√ÉO VICENTE">
                            <option value="vxe_airport">Mindelo - A√©roport C. √âvora (VXE)</option>
                            <option value="mindelo_city">Mindelo - Centre Ville</option>
                            <option value="mindelo_port">Porto Grande (Ferry)</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è SAL">
                            <option value="sid_airport">Espargos - A√©roport A. Cabral (SID)</option>
                            <option value="santa_maria">Santa Maria</option>
                            <option value="palmeira">Palmeira (Port)</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è BOA VISTA">
                            <option value="bvc_airport">Rabil - A√©roport A. Pereira (BVC)</option>
                            <option value="sal_rei">Sal Rei</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è FOGO">
                            <option value="sfl_airport">S√£o Filipe - A√©roport (SFL)</option>
                            <option value="sao_filipe">S√£o Filipe - Ville</option>
                            <option value="mosteiros">Mosteiros</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è SANTO ANT√ÉO">
                            <option value="porto_novo">Porto Novo (Gare Maritime)</option>
                            <option value="ribeira_grande">Ribeira Grande</option>
                            <option value="ponta_sol">Ponta do Sol</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è S√ÉO NICOLAU">
                            <option value="sne_airport">Pregui√ßa - A√©roport (SNE)</option>
                            <option value="ribeira_brava">Ribeira Brava</option>
                            <option value="tarrafal_sn">Tarrafal de S√£o Nicolau</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è MAIO">
                            <option value="mmo_airport">Vila do Maio - A√©roport (MMO)</option>
                            <option value="porto_ingles">Porto Ingl√™s / Vila do Maio</option>
                        </optgroup>

                        <optgroup label="üèùÔ∏è BRAVA">
                            <option value="furna">Furna (Port)</option>
                            <option value="nova_sintra">Nova Sintra</option>
                        </optgroup>

                    </select>
                    <i data-lucide="chevron-down" class="absolute right-0 text-gray-400 w-4 h-4 pointer-events-none"></i>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="form-section">
                    <label class="input-label">D√©but</label>
                    <input type="date" id="dateStart" class="input-field text-sm">
                </div>
                <div class="form-section">
                    <label class="input-label">Fin</label>
                    <input type="date" id="dateEnd" class="input-field text-sm">
                </div>
            </div>

            <div class="form-section flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="icon-rounded bg-blue-light">
                        <i data-lucide="user-check" class="w-5 h-5"></i>
                    </div>
                    <span class="font-bold text-[#1d4379] text-sm">Avec Chauffeur</span>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="driverToggle" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d4379]"></div>
                </label>
            </div>

        </form>
    </main>

    <div class="fixed-footer">
        <button onclick="goToResults()" class="btn-action btn-primary flex items-center justify-center gap-2 shadow-xl">
            <i data-lucide="search" class="w-4 h-4"></i>
            Voir les v√©hicules
        </button>
    </div>

    <div id="menu-overlay" onclick="toggleMenu()"></div>
    <div id="universal-menu">
        <div class="menu-header">
            <img src="logo.png" style="height: 32px;">
            <button onclick="toggleMenu()"><i data-lucide="x" style="width: 24px; color: #1d4379;"></i></button>
        </div>
        <nav class="menu-nav">
            <a href="index.html" class="menu-link"><i data-lucide="home"></i> Accueil</a>
            <a href="search-car.html" class="menu-link"><i data-lucide="search"></i> Recherche</a>
            <a href="my-rentals.html" class="menu-link"><i data-lucide="calendar"></i> Mes Locations</a>
            <a href="profile.html" class="menu-link"><i data-lucide="user"></i> Profil</a>
        </nav>
        <div class="menu-footer">
            <button onclick="if(confirm('D√©connexion ?')) window.location.href='login.html'" class="btn-logout"><i data-lucide="log-out"></i> D√©connexion</button>
        </div>
    </div>

    <script>
        lucide.createIcons();
        
        // Gestion du Menu Burger
        function toggleMenu() { 
            document.getElementById('universal-menu').classList.toggle('open'); 
            document.getElementById('menu-overlay').classList.toggle('open'); 
        }

        // Action de recherche
        function goToResults() {
            const loc = document.getElementById('locationSelect').value;
            const start = document.getElementById('dateStart').value;
            const end = document.getElementById('dateEnd').value;

            if(!loc) {
                alert("Veuillez choisir une ville ou un a√©roport.");
                return;
            }
            if(!start || !end) {
                alert("Veuillez s√©lectionner vos dates.");
                return;
            }

            // Redirection vers l'accueil filtr√© (simulation)
            // Dans une vraie app, on passerait les param√®tres dans l'URL (index.html?loc=praia&start=...)
            window.location.href = 'index.html';
        }

        // Dates par d√©faut (Demain -> +3 jours)
        window.onload = () => {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('dateStart').valueAsDate = tomorrow;
            
            const next = new Date(tomorrow);
            next.setDate(next.getDate() + 3);
            document.getElementById('dateEnd').valueAsDate = next;
        };
    </script>
</body>
</html>
